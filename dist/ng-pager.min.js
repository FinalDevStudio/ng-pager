!function(t){"use strict";function e(t){function e(e,n,i){function g(t,e,n,i){n=isNaN(n)?10:n,i=isNaN(i)?9:i,i%2||(console.log("[INFO]: displaySize of "+i+" forced into "+(i+1)),i++);for(var g=0,l=[],a=0,h=Math.floor(t/n);a<h;a++)l.push(++g);if(t%n!==0&&l.push(++g),l.length>i){var f=r(e-1,i,l);return f}return l}function r(t,e,n){t=t<0?0:t,t=t>n.length-1?n.length-1:t;var i={left:[],right:[],populate:function(){var e;if(t>0)for(e=t-1;e>0;e--)this.left.unshift(n[e]);if(t<n.length-1)for(e=t+1;e<n.length-1;e++)this.right.push(n[e])}},g={left:[],right:[],all:[],join:function(){return this.left.unshift(n[0]),this.right.push(n[n.length-1]),t>0&&t+1<n[n.length-1]&&this.left.push(n[t]),this.all=this.left.concat(this.right),this.all}},r={leftStepping:0,rightStepping:0,step:function(t,e){var n;if(e.left>0)for(this.leftStepping=Math.floor(t.left.length/e.left),n=t.left[t.left.length-1]+1-this.leftStepping;g.left.length<e.left;n-=this.leftStepping)g.left.unshift(n);if(e.right>0)for(this.rightStepping=Math.floor(t.right.length/e.right),n=t.right[0]-1+this.rightStepping;g.right.length<e.right;n+=this.rightStepping)g.right.push(n)}};i.populate();var h=a(i.left.length,i.right.length),f=l(t+1,e,n.length,h);r.step(i,f);var p=g.join();return p}function l(t,e,n,i){e=1===t||t===n?e-2:e-3;var g={left:h(e*(i.left/100)).integerVal,right:h(e*(i.right/100)).integerVal},r=h(e*(i.left/100)).decimalVal,l=h(e*(i.right/100)).decimalVal;return g.left+g.right!==e&&(r===l?g.left>g.right?g.left++:g.right++:r>l?g.left++:g.right++),g}function a(t,e){var n={left:0,right:0,ruleOfThree:function(n){return 100*n/(t+e)},define:function(){this.left=this.ruleOfThree(t),this.right=this.ruleOfThree(e)}};return n.define(),n}function h(t){var e={integerVal:Math.floor(t),decimalVal:t%1};return e}function f(){e.pages=g(e.total,e.page,e.pageCount,e.pagesLimit)}function p(t){if(e.pagesLimit=parseInt(i.ngpPagesLimit||7),e.total=parseInt(t.data||0),e.pageCount=parseInt(i.ngpPageCount),f(),i.ngpStartPage){e.page=parseInt(i.ngpStartPage)||1;var n=e.pages[e.pages.length-1];e.page>n&&(e.page=n),e.page<1&&(e.page=1),console.log("Start page: "+e.page)}}function o(t){e.page=t,e.pager(t),f()}function s(){e.page<e.pages[e.pages.length-1]&&o(++e.page)}function u(){e.page>1&&o(--e.page)}function c(){t.get(i.ngpCountUrl).then(p)}e.setPage=o,e.reset=c,e.next=s,e.prev=u,e.page=1,c()}function n(t,e){return e.ngpTemplateUrl}var i={templateUrl:n,link:e,restrict:"A",scope:{pager:"=ngpPager"}};return i}var n=t.angular;n.module("ngPager",[]).directive("ngPager",["$http",e])}(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5nLXBhZ2VyLmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsIm5nUGFnaW5hdGlvbkRpcmVjdGl2ZUZuIiwiJGh0dHAiLCJuZ1BhZ2luYXRpb25EaXJlY3RpdmVMaW5rRm4iLCIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRycyIsInBhZ2VyIiwiaXRlbXMiLCJjdXJyZW50UGFnZSIsIml0ZW1zUGVyUGFnZSIsImRpc3BsYXlTaXplIiwiaXNOYU4iLCJjb25zb2xlIiwibG9nIiwicGFnZSIsInBhZ2VzIiwiaSIsImwiLCJNYXRoIiwiZmxvb3IiLCJwdXNoIiwibGVuZ3RoIiwic3RlcHBlZFBhZ2VzIiwicGFnaW5hdGUiLCJjdXJyZW50SW5kZXgiLCJzcGxpdFBhZ2VzIiwibGVmdCIsInJpZ2h0IiwicG9wdWxhdGUiLCJ0aGlzIiwidW5zaGlmdCIsInJlc3VsdHMiLCJhbGwiLCJqb2luIiwiY29uY2F0IiwibGVmdFN0ZXBwaW5nIiwicmlnaHRTdGVwcGluZyIsInN0ZXAiLCJiYWxhbmNlIiwiYmFsYW5jZVBlcmNlbnRzIiwicGVyY2VudCIsImJhbGFuY2VzIiwib3V0cHV0IiwibGFzdFBhZ2UiLCJwZXJjZW50YWdlcyIsInRlYXJOdW1iZXIiLCJpbnRlZ2VyVmFsIiwibGVmdERlY2ltYWwiLCJkZWNpbWFsVmFsIiwicmlnaHREZWNpbWFsIiwibGVmdExlbmd0aCIsInJpZ2h0TGVuZ3RoIiwicnVsZU9mVGhyZWUiLCJkZWZpbmUiLCJudW1iZXIiLCJ0b3JuTnVtYmVyIiwiZ2VuZXJhdGVQYWdlc0FycmF5IiwidG90YWwiLCJwYWdlQ291bnQiLCJwYWdlc0xpbWl0Iiwib25Db3VudFN1Y2Nlc3MiLCJyZXMiLCJwYXJzZUludCIsIm5ncFBhZ2VzTGltaXQiLCJkYXRhIiwibmdwUGFnZUNvdW50IiwibmdwU3RhcnRQYWdlIiwic2V0UGFnZSIsIm5leHQiLCJwcmV2IiwicmVzZXQiLCJnZXQiLCJuZ3BDb3VudFVybCIsInRoZW4iLCJuZ1BhZ2luYXRpb25EaXJlY3RpdmVUZW1wbGF0ZVVybEZuIiwibmdwVGVtcGxhdGVVcmwiLCJuZ1BhZ2luYXRpb25EaXJlY3RpdmVEZWYiLCJ0ZW1wbGF0ZVVybCIsImxpbmsiLCJyZXN0cmljdCIsInNjb3BlIiwibmciLCJhbmd1bGFyIiwibW9kdWxlIiwiZGlyZWN0aXZlIl0sIm1hcHBpbmdzIjoiQ0FBQyxTQUFVQSxHQUNULFlBU0EsU0FBU0MsR0FBd0JDLEdBTS9CLFFBQVNDLEdBQTRCQyxFQUFRQyxFQUFVQyxHQVdyRCxRQUFTQyxHQUFNQyxFQUFPQyxFQUFhQyxFQUFjQyxHQUMvQ0QsRUFBZ0JFLE1BQU1GLEdBQWlCLEdBQUtBLEVBQzVDQyxFQUFlQyxNQUFNRCxHQUFnQixFQUFJQSxFQUVuQ0EsRUFBYyxJQUNsQkUsUUFBUUMsSUFBSSwwQkFBNEJILEVBQWMsaUJBQW1CQSxFQUFjLElBQ3ZGQSxJQU1GLEtBQUssR0FIREksR0FBTyxFQUNQQyxLQUVLQyxFQUFJLEVBQUdDLEVBQUlDLEtBQUtDLE1BQU1aLEVBQVFFLEdBQWVPLEVBQUlDLEVBQUdELElBQzNERCxFQUFNSyxPQUFPTixFQU9mLElBSklQLEVBQVFFLElBQWlCLEdBQzNCTSxFQUFNSyxPQUFPTixHQUdYQyxFQUFNTSxPQUFTWCxFQUFhLENBQzlCLEdBQUlZLEdBQWVDLEVBQVNmLEVBQWMsRUFBR0UsRUFBYUssRUFDMUQsT0FBT08sR0FFUCxNQUFPUCxHQWFYLFFBQVNRLEdBQVNDLEVBQWNkLEVBQWFLLEdBQzNDUyxFQUFnQkEsRUFBZSxFQUFLLEVBQUlBLEVBQ3hDQSxFQUFnQkEsRUFBZ0JULEVBQU1NLE9BQVMsRUFBT04sRUFBTU0sT0FBUyxFQUFLRyxDQUUxRSxJQUFJQyxJQUNGQyxRQUNBQyxTQUVBQyxTQUFVLFdBQ1IsR0FBSVosRUFFSixJQUFJUSxFQUFlLEVBQ2pCLElBQUtSLEVBQUtRLEVBQWUsRUFBSVIsRUFBSSxFQUFHQSxJQUNsQ2EsS0FBS0gsS0FBS0ksUUFBUWYsRUFBTUMsR0FJNUIsSUFBSVEsRUFBZ0JULEVBQU1NLE9BQVMsRUFDakMsSUFBS0wsRUFB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RUFwRixLQUdKRCIsImZpbGUiOiJuZy1wYWdlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAod2luZG93KSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgbmcgPSB3aW5kb3cuYW5ndWxhcjtcblxuICAvKipcbiAgICogUGFnaW5hdGlvbiBkaXJlY3RpdmUgZnVuY3Rpb24uXG4gICAqXG4gICAqIEB0eXBlIEFuZ3VsYXJKUyBEaXJlY3RpdmUgRnVuY3Rpb25cbiAgICovXG4gIGZ1bmN0aW9uIG5nUGFnaW5hdGlvbkRpcmVjdGl2ZUZuKCRodHRwKSB7XG4gICAgLyoqXG4gICAgICogUGFnaW5hdGlvbiBkaXJlY3RpdmUgbGluayBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEB0eXBlIEFuZ3VsYXJKUyBEaXJlY3RpdmUgTGluayBGdW5jdGlvblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG5nUGFnaW5hdGlvbkRpcmVjdGl2ZUxpbmtGbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMpIHtcbiAgICAgIC8qKlxuICAgICAgICogTWFpbiBwYWdpbmF0aW9uIGZ1bmN0aW9uLiBEZXRlcm1pbmUgaWYgdGhlIHNtYXJ0LXBhZ2luYXRpb24gYWxnb3JpdGhtIGlzIG5lZWRlZCBvciBub3QuIERpc3BsYXkgYWxsIHBhZ2VzIGlmIG5vdC5cbiAgICAgICAqIFxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGl0ZW1zIFRvdGFsIGFtb3VudCBvZiBpdGVtcyB0byBzb3J0XG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gY3VycmVudFBhZ2UgTm9uLXplcm8gYmFzZWQgaW5kZXggZm9yIHRoZSBjdXJyZW50IHBhZ2VcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpdGVtc1BlclBhZ2UgQW1vdW50IG9mIGl0ZW1zIHRvIGRpc3BsYXkgb24gZWFjaCBwYWdlIChEZWZhdWx0OiAxMClcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkaXNwbGF5U2l6ZSBMaW1pdCBvZiBwYWdlcyB0byBkaXNwbGF5LiBNdXN0IGJlIGFuIG9kZCBudW1iZXIgKERlZmF1bHQ6IDkpXG4gICAgICAgKiBcbiAgICAgICAqIEByZXR1cm4ge0FycmF5fSBMaXN0IG9mIHBhZ2VzIHRoZSBwYWdpbmF0aW9uIGVsZW1lbnQgd2lsbCBkaXNwbGF5XG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHBhZ2VyKGl0ZW1zLCBjdXJyZW50UGFnZSwgaXRlbXNQZXJQYWdlLCBkaXNwbGF5U2l6ZSkge1xuICAgICAgICBpdGVtc1BlclBhZ2UgPSAoaXNOYU4oaXRlbXNQZXJQYWdlKSkgPyAxMCA6IGl0ZW1zUGVyUGFnZTtcbiAgICAgICAgZGlzcGxheVNpemUgPSAoaXNOYU4oZGlzcGxheVNpemUpKSA/IDkgOiBkaXNwbGF5U2l6ZTtcblxuICAgICAgICBpZiAoIShkaXNwbGF5U2l6ZSAlIDIpKSB7IC8vIENoZWNrIGlmIE5PVCBvZGRcbiAgICAgICAgICBjb25zb2xlLmxvZygnW0lORk9dOiBkaXNwbGF5U2l6ZSBvZiAnICsgZGlzcGxheVNpemUgKyAnIGZvcmNlZCBpbnRvICcgKyAoZGlzcGxheVNpemUgKyAxKSk7XG4gICAgICAgICAgZGlzcGxheVNpemUrKztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYWdlID0gMDtcbiAgICAgICAgdmFyIHBhZ2VzID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBNYXRoLmZsb29yKGl0ZW1zIC8gaXRlbXNQZXJQYWdlKTsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIHBhZ2VzLnB1c2goKytwYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpdGVtcyAlIGl0ZW1zUGVyUGFnZSAhPT0gMCkge1xuICAgICAgICAgIHBhZ2VzLnB1c2goKytwYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYWdlcy5sZW5ndGggPiBkaXNwbGF5U2l6ZSkge1xuICAgICAgICAgIHZhciBzdGVwcGVkUGFnZXMgPSBwYWdpbmF0ZShjdXJyZW50UGFnZSAtIDEsIGRpc3BsYXlTaXplLCBwYWdlcyk7XG4gICAgICAgICAgcmV0dXJuIHN0ZXBwZWRQYWdlcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcGFnZXM7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTbWFydC1wYWdpbmF0aW9uIGFsZ29yaXRobSBmdW5jdGlvbi5cbiAgICAgICAqIFxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGN1cnJlbnRJbmRleCBDdXJyZW50IHBhZ2VcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkaXNwbGF5U2l6ZSBMaW1pdCBvZiBwYWdlcyB0byBkaXNwbGF5LiBNdXN0IGJlIGFuIG9kZCBudW1iZXJcbiAgICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhZ2VzIEFycmF5IG9mIGFsbCBwYWdlc1xuICAgICAgICogXG4gICAgICAgKiBAcmV0dXJuIHtBcnJheX0gRmlsdGVyZWQgbGlzdCBvZiBwYWdlcyB0byBkaXNwbGF5XG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHBhZ2luYXRlKGN1cnJlbnRJbmRleCwgZGlzcGxheVNpemUsIHBhZ2VzKSB7XG4gICAgICAgIGN1cnJlbnRJbmRleCA9IChjdXJyZW50SW5kZXggPCAwKSA/IDAgOiBjdXJyZW50SW5kZXg7XG4gICAgICAgIGN1cnJlbnRJbmRleCA9IChjdXJyZW50SW5kZXggPiAocGFnZXMubGVuZ3RoIC0gMSkpID8gKHBhZ2VzLmxlbmd0aCAtIDEpIDogY3VycmVudEluZGV4O1xuXG4gICAgICAgIHZhciBzcGxpdFBhZ2VzID0ge1xuICAgICAgICAgIGxlZnQ6IFtdLFxuICAgICAgICAgIHJpZ2h0OiBbXSxcblxuICAgICAgICAgIHBvcHVsYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaTtcblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRJbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgZm9yIChpID0gKGN1cnJlbnRJbmRleCAtIDEpOyBpID4gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sZWZ0LnVuc2hpZnQocGFnZXNbaV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50SW5kZXggPCAocGFnZXMubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgICAgZm9yIChpID0gKGN1cnJlbnRJbmRleCArIDEpOyBpIDwgKHBhZ2VzLmxlbmd0aCAtIDEpOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0LnB1c2gocGFnZXNbaV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXN1bHRzID0ge1xuICAgICAgICAgIGxlZnQ6IFtdLFxuICAgICAgICAgIHJpZ2h0OiBbXSxcbiAgICAgICAgICBhbGw6IFtdLFxuXG4gICAgICAgICAgam9pbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sZWZ0LnVuc2hpZnQocGFnZXNbMF0pO1xuICAgICAgICAgICAgdGhpcy5yaWdodC5wdXNoKHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdKTtcblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRJbmRleCA+IDAgJiYgKGN1cnJlbnRJbmRleCArIDEpIDwgcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV0pIHtcbiAgICAgICAgICAgICAgdGhpcy5sZWZ0LnB1c2gocGFnZXNbY3VycmVudEluZGV4XSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYWxsID0gdGhpcy5sZWZ0LmNvbmNhdCh0aGlzLnJpZ2h0KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHN0ZXBwZWRQYWdlcyA9IHtcbiAgICAgICAgICBsZWZ0U3RlcHBpbmc6IDAsXG4gICAgICAgICAgcmlnaHRTdGVwcGluZzogMCxcblxuICAgICAgICAgIHN0ZXA6IGZ1bmN0aW9uIChzcGxpdFBhZ2VzLCBiYWxhbmNlKSB7XG4gICAgICAgICAgICB2YXIgaTtcblxuICAgICAgICAgICAgaWYgKGJhbGFuY2UubGVmdCA+IDApIHtcbiAgICAgICAgICAgICAgdGhpcy5sZWZ0U3RlcHBpbmcgPSBNYXRoLmZsb29yKHNwbGl0UGFnZXMubGVmdC5sZW5ndGggLyBiYWxhbmNlLmxlZnQpO1xuXG4gICAgICAgICAgICAgIGZvciAoaSA9IChzcGxpdFBhZ2VzLmxlZnRbc3BsaXRQYWdlcy5sZWZ0Lmxlbmd0aCAtIDFdICsgMSkgLSB0aGlzLmxlZnRTdGVwcGluZzsgcmVzdWx0cy5sZWZ0Lmxlbmd0aCA8IGJhbGFuY2UubGVmdDsgaSA9IChpIC0gdGhpcy5sZWZ0U3RlcHBpbmcpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5sZWZ0LnVuc2hpZnQoaSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJhbGFuY2UucmlnaHQgPiAwKSB7XG4gICAgICAgICAgICAgIHRoaXMucmlnaHRTdGVwcGluZyA9IE1hdGguZmxvb3Ioc3BsaXRQYWdlcy5yaWdodC5sZW5ndGggLyBiYWxhbmNlLnJpZ2h0KTtcblxuICAgICAgICAgICAgICBmb3IgKGkgPSAoc3BsaXRQYWdlcy5yaWdodFswXSAtIDEpICsgdGhpcy5yaWdodFN0ZXBwaW5nOyByZXN1bHRzLnJpZ2h0Lmxlbmd0aCA8IGJhbGFuY2UucmlnaHQ7IGkgPSAoaSArIHRoaXMucmlnaHRTdGVwcGluZykpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnJpZ2h0LnB1c2goaSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc3BsaXRQYWdlcy5wb3B1bGF0ZSgpO1xuXG4gICAgICAgIHZhciBiYWxhbmNlUGVyY2VudHMgPSBwZXJjZW50KHNwbGl0UGFnZXMubGVmdC5sZW5ndGgsIHNwbGl0UGFnZXMucmlnaHQubGVuZ3RoKTtcbiAgICAgICAgdmFyIGJhbGFuY2VzID0gYmFsYW5jZSgoY3VycmVudEluZGV4ICsgMSksIGRpc3BsYXlTaXplLCBwYWdlcy5sZW5ndGgsIGJhbGFuY2VQZXJjZW50cyk7XG5cbiAgICAgICAgc3RlcHBlZFBhZ2VzLnN0ZXAoc3BsaXRQYWdlcywgYmFsYW5jZXMpO1xuICAgICAgICB2YXIgb3V0cHV0ID0gcmVzdWx0cy5qb2luKCk7XG5cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBEZXRlcm1pbmUgdGhlIGJhbGFuY2Ugb2YgcGFnZXMgdG8gdGhlIGxlZnQgYW5kIHJpZ2h0IGp1ZGdpbmcgZnJvbSB0aGUgY3VycmVudCBwYWdlIHRoZSB1c2VyIGlzIGF0LlxuICAgICAgICogXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gY3VycmVudFBhZ2UgQ3VycmVudCBwYWdlIHRoZSB1c2VyIGlzIGF0XG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gZGlzcGxheVNpemUgTGltaXQgb2YgcGFnZXMgdG8gZGlzcGxheVxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGxhc3RQYWdlIFZhbHVlIGF0IHRoZSBsYXN0IGluZGV4IG9mIHRoZSBwYWdlcyBhcnJheVxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IHBlcmNlbnRhZ2VzIFBlcmNlbnRhZ2VzIG9iamVjdFxuICAgICAgICogXG4gICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IExlZnQvUmlnaHQgcmVzdWx0cyBvYmplY3RcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gYmFsYW5jZShjdXJyZW50UGFnZSwgZGlzcGxheVNpemUsIGxhc3RQYWdlLCBwZXJjZW50YWdlcykge1xuICAgICAgICBkaXNwbGF5U2l6ZSA9IChjdXJyZW50UGFnZSA9PT0gMSB8fCBjdXJyZW50UGFnZSA9PT0gbGFzdFBhZ2UpID8gKGRpc3BsYXlTaXplIC0gMikgOiAoZGlzcGxheVNpemUgLSAzKTtcblxuICAgICAgICB2YXIgcmVzdWx0cyA9IHtcbiAgICAgICAgICBsZWZ0OiB0ZWFyTnVtYmVyKGRpc3BsYXlTaXplICogKHBlcmNlbnRhZ2VzLmxlZnQgLyAxMDApKS5pbnRlZ2VyVmFsLFxuICAgICAgICAgIHJpZ2h0OiB0ZWFyTnVtYmVyKGRpc3BsYXlTaXplICogKHBlcmNlbnRhZ2VzLnJpZ2h0IC8gMTAwKSkuaW50ZWdlclZhbFxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBsZWZ0RGVjaW1hbCA9IHRlYXJOdW1iZXIoZGlzcGxheVNpemUgKiAocGVyY2VudGFnZXMubGVmdCAvIDEwMCkpLmRlY2ltYWxWYWw7XG4gICAgICAgIHZhciByaWdodERlY2ltYWwgPSB0ZWFyTnVtYmVyKGRpc3BsYXlTaXplICogKHBlcmNlbnRhZ2VzLnJpZ2h0IC8gMTAwKSkuZGVjaW1hbFZhbDtcblxuICAgICAgICBpZiAoKHJlc3VsdHMubGVmdCArIHJlc3VsdHMucmlnaHQpICE9PSBkaXNwbGF5U2l6ZSkge1xuICAgICAgICAgIGlmIChsZWZ0RGVjaW1hbCA9PT0gcmlnaHREZWNpbWFsKSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0cy5sZWZ0ID4gcmVzdWx0cy5yaWdodCkge1xuICAgICAgICAgICAgICByZXN1bHRzLmxlZnQrKztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlc3VsdHMucmlnaHQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGxlZnREZWNpbWFsID4gcmlnaHREZWNpbWFsKSB7XG4gICAgICAgICAgICAgIHJlc3VsdHMubGVmdCsrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzdWx0cy5yaWdodCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIERldGVybWluZSBwZXJjZW50YWdlIG9mIHR3byBhcnJheXMgdGFraW5nIGJvdGggc3VtbWVkIGFzIHRvdGFsLlxuICAgICAgICogXG4gICAgICAgKiBAcGFyYW0ge0FycmF5fSBsZWZ0TGVuZ3RoIExlZnQgYXJyYXlcbiAgICAgICAqIEBwYXJhbSB7QXJyYXl9IHJpZ2h0TGVuZ3RoIFJpZ2h0IGFycmF5XG4gICAgICAgKiBcbiAgICAgICAqIEByZXR1cm4ge09iamVjdH0gUmV0dXJucyBwZXJjZW50YWdlcyBvYmplY3RcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gcGVyY2VudChsZWZ0TGVuZ3RoLCByaWdodExlbmd0aCkge1xuICAgICAgICB2YXIgcGVyY2VudGFnZXMgPSB7XG4gICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICByaWdodDogMCxcblxuICAgICAgICAgIHJ1bGVPZlRocmVlOiBmdW5jdGlvbiAobGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gKDEwMCAqIGxlbmd0aCkgLyAobGVmdExlbmd0aCArIHJpZ2h0TGVuZ3RoKTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgZGVmaW5lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmxlZnQgPSB0aGlzLnJ1bGVPZlRocmVlKGxlZnRMZW5ndGgpO1xuICAgICAgICAgICAgdGhpcy5yaWdodCA9IHRoaXMucnVsZU9mVGhyZWUocmlnaHRMZW5ndGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBwZXJjZW50YWdlcy5kZWZpbmUoKTtcblxuICAgICAgICByZXR1cm4gcGVyY2VudGFnZXM7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2VwYXJhdGUgYSBudW1iZXIgaW50byBpdHMgaW50ZWdlciBhbmQgZGVjaW1hbCBwYXJ0c1xuICAgICAgICogXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5wdXROdW1iZXIgTnVtYmVyIHRvIHRlYXJcbiAgICAgICAqIFxuICAgICAgICogQHJldHVybiB7T2JqZWN0fSBUb3JuIG51bWJlciBvYmplY3RcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gdGVhck51bWJlcihudW1iZXIpIHtcbiAgICAgICAgdmFyIHRvcm5OdW1iZXIgPSB7XG4gICAgICAgICAgaW50ZWdlclZhbDogTWF0aC5mbG9vcihudW1iZXIpLFxuICAgICAgICAgIGRlY2ltYWxWYWw6IChudW1iZXIgJSAxKVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB0b3JuTnVtYmVyO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlLWdlbmVyYXRlIG9uIHJlZnJlc2ggb3IgcGFnZSBjaGFuZ2VcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVQYWdlc0FycmF5KCkge1xuICAgICAgICAkc2NvcGUucGFnZXMgPSBwYWdlcigkc2NvcGUudG90YWwsICRzY29wZS5wYWdlLCAkc2NvcGUucGFnZUNvdW50LCAkc2NvcGUucGFnZXNMaW1pdCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogT24gY291bnQgcmVxdWVzdCBzdWNjZXNzLlxuICAgICAgICpcbiAgICAgICAqIEB0eXBlICRodHRwIHRoZW4gY2FsbGJhY2suXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIG9uQ291bnRTdWNjZXNzKHJlcykge1xuICAgICAgICAkc2NvcGUucGFnZXNMaW1pdCA9IHBhcnNlSW50KCRhdHRycy5uZ3BQYWdlc0xpbWl0IHx8IDcpO1xuICAgICAgICAkc2NvcGUudG90YWwgPSBwYXJzZUludChyZXMuZGF0YSB8fCAwKTtcbiAgICAgICAgJHNjb3BlLnBhZ2VDb3VudCA9IHBhcnNlSW50KCRhdHRycy5uZ3BQYWdlQ291bnQpO1xuXG4gICAgICAgIGdlbmVyYXRlUGFnZXNBcnJheSgpO1xuXG4gICAgICAgIGlmICgkYXR0cnMubmdwU3RhcnRQYWdlKSB7XG4gICAgICAgICAgJHNjb3BlLnBhZ2UgPSBwYXJzZUludCgkYXR0cnMubmdwU3RhcnRQYWdlKSB8fCAxO1xuXG4gICAgICAgICAgdmFyIGxhc3RQYWdlID0gJHNjb3BlLnBhZ2VzWyRzY29wZS5wYWdlcy5sZW5ndGggLSAxXTtcblxuICAgICAgICAgIGlmICgkc2NvcGUucGFnZSA+IGxhc3RQYWdlKSB7XG4gICAgICAgICAgICAkc2NvcGUucGFnZSA9IGxhc3RQYWdlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICgkc2NvcGUucGFnZSA8IDEpIHtcbiAgICAgICAgICAgICRzY29wZS5wYWdlID0gMTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zb2xlLmxvZygnU3RhcnQgcGFnZTogJyArICRzY29wZS5wYWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHMgdGhlIGN1cnJlbnQgcGFnZS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gcGFnZSBUaGUgcGFnZSBudW1iZXIgdG8gc2V0LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBzZXRQYWdlKHBhZ2UpIHtcbiAgICAgICAgJHNjb3BlLnBhZ2UgPSBwYWdlO1xuICAgICAgICAkc2NvcGUucGFnZXIocGFnZSk7XG5cbiAgICAgICAgZ2VuZXJhdGVQYWdlc0FycmF5KCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR29lcyB0byB0aGUgbmV4dCBwYWdlLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICBpZiAoJHNjb3BlLnBhZ2UgPCAkc2NvcGUucGFnZXNbJHNjb3BlLnBhZ2VzLmxlbmd0aCAtIDFdKSB7XG4gICAgICAgICAgc2V0UGFnZSgrKyRzY29wZS5wYWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdvZXMgdG8gdGhlIHByZXZpb3VzIHBhZ2UuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHByZXYoKSB7XG4gICAgICAgIGlmICgkc2NvcGUucGFnZSA+IDEpIHtcbiAgICAgICAgICBzZXRQYWdlKC0tJHNjb3BlLnBhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgICAkaHR0cC5nZXQoJGF0dHJzLm5ncENvdW50VXJsKVxuICAgICAgICAgIC50aGVuKG9uQ291bnRTdWNjZXNzKTtcbiAgICAgIH1cblxuICAgICAgJHNjb3BlLnNldFBhZ2UgPSBzZXRQYWdlO1xuICAgICAgJHNjb3BlLnJlc2V0ID0gcmVzZXQ7XG4gICAgICAkc2NvcGUubmV4dCA9IG5leHQ7XG4gICAgICAkc2NvcGUucHJldiA9IHByZXY7XG4gICAgICAkc2NvcGUucGFnZSA9IDE7XG5cbiAgICAgIHJlc2V0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFnaW5hdGlvbiBkaXJlY3RpdmUgdGVtcGxhdGUgVVJMIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHR5cGUgQW5ndWxhckpTIERpcmVjdGl2ZSBUZW1wbGF0ZSBVUkwgRnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gbmdQYWdpbmF0aW9uRGlyZWN0aXZlVGVtcGxhdGVVcmxGbigkZWxlbWVudCwgJGF0dHJzKSB7XG4gICAgICByZXR1cm4gJGF0dHJzLm5ncFRlbXBsYXRlVXJsO1xuICAgIH1cblxuICAgIC8qIFBhZ2luYXRpb24gZGlyZWN0aXZlIGRlZmluaXRpb24gKi9cbiAgICB2YXIgbmdQYWdpbmF0aW9uRGlyZWN0aXZlRGVmID0ge1xuICAgICAgdGVtcGxhdGVVcmw6IG5nUGFnaW5hdGlvbkRpcmVjdGl2ZVRlbXBsYXRlVXJsRm4sXG5cbiAgICAgIGxpbms6IG5nUGFnaW5hdGlvbkRpcmVjdGl2ZUxpbmtGbixcblxuICAgICAgcmVzdHJpY3Q6ICdBJyxcblxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgcGFnZXI6ICc9bmdwUGFnZXInXG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBuZ1BhZ2luYXRpb25EaXJlY3RpdmVEZWY7XG4gIH1cblxuICAvKiBEZWZpbmUgdGhlIEFuZ3VsYXJKUyBtb2R1bGUgKi9cbiAgbmcubW9kdWxlKCduZ1BhZ2VyJywgW10pXG5cbiAgICAvKiBEZWZpbmUgdGhlIEFuZ3VsYXJKUyBkaXJlY3RpdmUgKi9cbiAgICAuZGlyZWN0aXZlKCduZ1BhZ2VyJywgW1xuICAgICAgJyRodHRwJyxcblxuICAgICAgbmdQYWdpbmF0aW9uRGlyZWN0aXZlRm5cbiAgICBdKTtcblxufSh3aW5kb3cpKTsiXX0=
