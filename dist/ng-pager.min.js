!function(t){"use strict";function e(t){function e(e,n,i){function g(t,e,n,i){n=isNaN(n)?10:n,i=isNaN(i)?9:i,i%2||(console.log("[INFO]: displaySize of "+i+" forced into "+(i+1)),i++);for(var g=0,l=[],a=0,h=Math.floor(t/n);a<h;a++)l.push(++g);if(t%n!==0&&l.push(++g),l.length>i){var f=r(e-1,i,l);return f}return l}function r(t,e,n){t=t<0?0:t,t=t>n.length-1?n.length-1:t;var i={left:[],right:[],populate:function(){var e;if(t>0)for(e=t-1;e>0;e--)this.left.unshift(n[e]);if(t<n.length-1)for(e=t+1;e<n.length-1;e++)this.right.push(n[e])}},g={left:[],right:[],all:[],join:function(){return this.left.unshift(n[0]),this.right.push(n[n.length-1]),t>0&&t+1<n[n.length-1]&&this.left.push(n[t]),this.all=this.left.concat(this.right),this.all}},r={leftStepping:0,rightStepping:0,step:function(t,e){var n;if(e.left>0)for(this.leftStepping=Math.floor(t.left.length/e.left),n=t.left[t.left.length-1]+1-this.leftStepping;g.left.length<e.left;n-=this.leftStepping)g.left.unshift(n);if(e.right>0)for(this.rightStepping=Math.floor(t.right.length/e.right),n=t.right[0]-1+this.rightStepping;g.right.length<e.right;n+=this.rightStepping)g.right.push(n)}};i.populate();var h=a(i.left.length,i.right.length),f=l(t+1,e,n.length,h);r.step(i,f);var p=g.join();return p}function l(t,e,n,i){e=1===t||t===n?e-2:e-3;var g={left:h(e*(i.left/100)).integerVal,right:h(e*(i.right/100)).integerVal},r=h(e*(i.left/100)).decimalVal,l=h(e*(i.right/100)).decimalVal;return g.left+g.right!==e&&(r===l?g.left>g.right?g.left++:g.right++:r>l?g.left++:g.right++),g}function a(t,e){var n={left:0,right:0,ruleOfThree:function(n){return 100*n/(t+e)},define:function(){this.left=this.ruleOfThree(t),this.right=this.ruleOfThree(e)}};return n.define(),n}function h(t){var e={integerVal:Math.floor(t),decimalVal:t%1};return e}function f(){e.pages=g(e.total,e.page,e.pageCount,e.pagesLimit)}function p(t){e.pagesLimit=parseInt(i.ngpPagesLimit||7),e.total=parseInt(t.data||0),e.pageCount=parseInt(i.ngpPageCount),f(),i.ngpStartPage&&(e.page=parseInt(i.ngpStartPage)||1,e.page>e.pages.length&&(e.page=e.pages.length),e.page<1&&(e.page=1),console.log("Start page: "+e.page))}function o(t){e.page=t,e.pager(t),f()}function s(){e.page<e.pages[e.pages.length-1]&&o(++e.page)}function u(){e.page>1&&o(--e.page)}function c(){t.get(i.ngpCountUrl).then(p)}e.setPage=o,e.reset=c,e.next=s,e.prev=u,e.page=1,c()}function n(t,e){return e.ngpTemplateUrl}var i={templateUrl:n,link:e,restrict:"A",scope:{pager:"=ngpPager"}};return i}var n=t.angular;n.module("ngPager",[]).directive("ngPager",["$http",e])}(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5nLXBhZ2VyLmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsIm5nUGFnaW5hdGlvbkRpcmVjdGl2ZUZuIiwiJGh0dHAiLCJuZ1BhZ2luYXRpb25EaXJlY3RpdmVMaW5rRm4iLCIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRycyIsInBhZ2VyIiwiaXRlbXMiLCJjdXJyZW50UGFnZSIsIml0ZW1zUGVyUGFnZSIsImRpc3BsYXlTaXplIiwiaXNOYU4iLCJjb25zb2xlIiwibG9nIiwicGFnZSIsInBhZ2VzIiwiaSIsImwiLCJNYXRoIiwiZmxvb3IiLCJwdXNoIiwibGVuZ3RoIiwic3RlcHBlZFBhZ2VzIiwicGFnaW5hdGUiLCJjdXJyZW50SW5kZXgiLCJzcGxpdFBhZ2VzIiwibGVmdCIsInJpZ2h0IiwicG9wdWxhdGUiLCJ0aGlzIiwidW5zaGlmdCIsInJlc3VsdHMiLCJhbGwiLCJqb2luIiwiY29uY2F0IiwibGVmdFN0ZXBwaW5nIiwicmlnaHRTdGVwcGluZyIsInN0ZXAiLCJiYWxhbmNlIiwiYmFsYW5jZVBlcmNlbnRzIiwicGVyY2VudCIsImJhbGFuY2VzIiwib3V0cHV0IiwibGFzdFBhZ2UiLCJwZXJjZW50YWdlcyIsInRlYXJOdW1iZXIiLCJpbnRlZ2VyVmFsIiwibGVmdERlY2ltYWwiLCJkZWNpbWFsVmFsIiwicmlnaHREZWNpbWFsIiwibGVmdExlbmd0aCIsInJpZ2h0TGVuZ3RoIiwicnVsZU9mVGhyZWUiLCJkZWZpbmUiLCJudW1iZXIiLCJ0b3JuTnVtYmVyIiwiZ2VuZXJhdGVQYWdlc0FycmF5IiwidG90YWwiLCJwYWdlQ291bnQiLCJwYWdlc0xpbWl0Iiwib25Db3VudFN1Y2Nlc3MiLCJyZXMiLCJwYXJzZUludCIsIm5ncFBhZ2VzTGltaXQiLCJkYXRhIiwibmdwUGFnZUNvdW50IiwibmdwU3RhcnRQYWdlIiwic2V0UGFnZSIsIm5leHQiLCJwcmV2IiwicmVzZXQiLCJnZXQiLCJuZ3BDb3VudFVybCIsInRoZW4iLCJuZ1BhZ2luYXRpb25EaXJlY3RpdmVUZW1wbGF0ZVVybEZuIiwibmdwVGVtcGxhdGVVcmwiLCJuZ1BhZ2luYXRpb25EaXJlY3RpdmVEZWYiLCJ0ZW1wbGF0ZVVybCIsImxpbmsiLCJyZXN0cmljdCIsInNjb3BlIiwibmciLCJhbmd1bGFyIiwibW9kdWxlIiwiZGlyZWN0aXZlIl0sIm1hcHBpbmdzIjoiQ0FBQyxTQUFVQSxHQUNULFlBU0EsU0FBU0MsR0FBd0JDLEdBTS9CLFFBQVNDLEdBQTRCQyxFQUFRQyxFQUFVQyxHQVdyRCxRQUFTQyxHQUFNQyxFQUFPQyxFQUFhQyxFQUFjQyxHQUMvQ0QsRUFBZ0JFLE1BQU1GLEdBQWlCLEdBQUtBLEVBQzVDQyxFQUFlQyxNQUFNRCxHQUFnQixFQUFJQSxFQUVuQ0EsRUFBYyxJQUNsQkUsUUFBUUMsSUFBSSwwQkFBNEJILEVBQWMsaUJBQW1CQSxFQUFjLElBQ3ZGQSxJQU1GLEtBQUssR0FIREksR0FBTyxFQUNQQyxLQUVLQyxFQUFJLEVBQUdDLEVBQUlDLEtBQUtDLE1BQU1aLEVBQVFFLEdBQWVPLEVBQUlDLEVBQUdELElBQzNERCxFQUFNSyxPQUFPTixFQU9mLElBSklQLEVBQVFFLElBQWlCLEdBQzNCTSxFQUFNSyxPQUFPTixHQUdYQyxFQUFNTSxPQUFTWCxFQUFhLENBQzlCLEdBQUlZLEdBQWVDLEVBQVNmLEVBQWMsRUFBR0UsRUFBYUssRUFDMUQsT0FBT08sR0FFUCxNQUFPUCxHQWFYLFFBQVNRLEdBQVNDLEVBQWNkLEVBQWFLLEdBQzNDUyxFQUFnQkEsRUFBZSxFQUFLLEVBQUlBLEVBQ3hDQSxFQUFnQkEsRUFBZ0JULEVBQU1NLE9BQVMsRUFBT04sRUFBTU0sT0FBUyxFQUFLRyxDQUUxRSxJQUFJQyxJQUNGQyxRQUNBQyxTQUVBQyxTQUFVLFdBQ1IsR0FBSVosRUFFSixJQUFJUSxFQUFlLEVBQ2pCLElBQUtSLEVBQUtRLEVBQWUsRUFBSVIsRUFBSSxFQUFHQSxJQUNsQ2EsS0FBS0gsS0FBS0ksUUFBUWYsRUFBTUMsR0FJNUIsSUFBSVEsRUFBZ0JULEVBQU1NLE9BQVMsRUFDakMsSUFBS0wsRUFB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cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICh3aW5kb3cpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBuZyA9IHdpbmRvdy5hbmd1bGFyO1xuXG4gIC8qKlxuICAgKiBQYWdpbmF0aW9uIGRpcmVjdGl2ZSBmdW5jdGlvbi5cbiAgICpcbiAgICogQHR5cGUgQW5ndWxhckpTIERpcmVjdGl2ZSBGdW5jdGlvblxuICAgKi9cbiAgZnVuY3Rpb24gbmdQYWdpbmF0aW9uRGlyZWN0aXZlRm4oJGh0dHApIHtcbiAgICAvKipcbiAgICAgKiBQYWdpbmF0aW9uIGRpcmVjdGl2ZSBsaW5rIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHR5cGUgQW5ndWxhckpTIERpcmVjdGl2ZSBMaW5rIEZ1bmN0aW9uXG4gICAgICovXG4gICAgZnVuY3Rpb24gbmdQYWdpbmF0aW9uRGlyZWN0aXZlTGlua0ZuKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xuICAgICAgLyoqXG4gICAgICAgKiBNYWluIHBhZ2luYXRpb24gZnVuY3Rpb24uIERldGVybWluZSBpZiB0aGUgc21hcnQtcGFnaW5hdGlvbiBhbGdvcml0aG0gaXMgbmVlZGVkIG9yIG5vdC4gRGlzcGxheSBhbGwgcGFnZXMgaWYgbm90LlxuICAgICAgICogXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gaXRlbXMgVG90YWwgYW1vdW50IG9mIGl0ZW1zIHRvIHNvcnRcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjdXJyZW50UGFnZSBOb24temVybyBiYXNlZCBpbmRleCBmb3IgdGhlIGN1cnJlbnQgcGFnZVxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGl0ZW1zUGVyUGFnZSBBbW91bnQgb2YgaXRlbXMgdG8gZGlzcGxheSBvbiBlYWNoIHBhZ2UgKERlZmF1bHQ6IDEwKVxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGRpc3BsYXlTaXplIExpbWl0IG9mIHBhZ2VzIHRvIGRpc3BsYXkuIE11c3QgYmUgYW4gb2RkIG51bWJlciAoRGVmYXVsdDogOSlcbiAgICAgICAqIFxuICAgICAgICogQHJldHVybiB7QXJyYXl9IExpc3Qgb2YgcGFnZXMgdGhlIHBhZ2luYXRpb24gZWxlbWVudCB3aWxsIGRpc3BsYXlcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gcGFnZXIoaXRlbXMsIGN1cnJlbnRQYWdlLCBpdGVtc1BlclBhZ2UsIGRpc3BsYXlTaXplKSB7XG4gICAgICAgIGl0ZW1zUGVyUGFnZSA9IChpc05hTihpdGVtc1BlclBhZ2UpKSA/IDEwIDogaXRlbXNQZXJQYWdlO1xuICAgICAgICBkaXNwbGF5U2l6ZSA9IChpc05hTihkaXNwbGF5U2l6ZSkpID8gOSA6IGRpc3BsYXlTaXplO1xuXG4gICAgICAgIGlmICghKGRpc3BsYXlTaXplICUgMikpIHsgLy8gQ2hlY2sgaWYgTk9UIG9kZFxuICAgICAgICAgIGNvbnNvbGUubG9nKCdbSU5GT106IGRpc3BsYXlTaXplIG9mICcgKyBkaXNwbGF5U2l6ZSArICcgZm9yY2VkIGludG8gJyArIChkaXNwbGF5U2l6ZSArIDEpKTtcbiAgICAgICAgICBkaXNwbGF5U2l6ZSsrO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBhZ2UgPSAwO1xuICAgICAgICB2YXIgcGFnZXMgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IE1hdGguZmxvb3IoaXRlbXMgLyBpdGVtc1BlclBhZ2UpOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgcGFnZXMucHVzaCgrK3BhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGl0ZW1zICUgaXRlbXNQZXJQYWdlICE9PSAwKSB7XG4gICAgICAgICAgcGFnZXMucHVzaCgrK3BhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IGRpc3BsYXlTaXplKSB7XG4gICAgICAgICAgdmFyIHN0ZXBwZWRQYWdlcyA9IHBhZ2luYXRlKGN1cnJlbnRQYWdlIC0gMSwgZGlzcGxheVNpemUsIHBhZ2VzKTtcbiAgICAgICAgICByZXR1cm4gc3RlcHBlZFBhZ2VzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBwYWdlcztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNtYXJ0LXBhZ2luYXRpb24gYWxnb3JpdGhtIGZ1bmN0aW9uLlxuICAgICAgICogXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gY3VycmVudEluZGV4IEN1cnJlbnQgcGFnZVxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGRpc3BsYXlTaXplIExpbWl0IG9mIHBhZ2VzIHRvIGRpc3BsYXkuIE11c3QgYmUgYW4gb2RkIG51bWJlclxuICAgICAgICogQHBhcmFtIHtBcnJheX0gcGFnZXMgQXJyYXkgb2YgYWxsIHBhZ2VzXG4gICAgICAgKiBcbiAgICAgICAqIEByZXR1cm4ge0FycmF5fSBGaWx0ZXJlZCBsaXN0IG9mIHBhZ2VzIHRvIGRpc3BsYXlcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gcGFnaW5hdGUoY3VycmVudEluZGV4LCBkaXNwbGF5U2l6ZSwgcGFnZXMpIHtcbiAgICAgICAgY3VycmVudEluZGV4ID0gKGN1cnJlbnRJbmRleCA8IDApID8gMCA6IGN1cnJlbnRJbmRleDtcbiAgICAgICAgY3VycmVudEluZGV4ID0gKGN1cnJlbnRJbmRleCA+IChwYWdlcy5sZW5ndGggLSAxKSkgPyAocGFnZXMubGVuZ3RoIC0gMSkgOiBjdXJyZW50SW5kZXg7XG5cbiAgICAgICAgdmFyIHNwbGl0UGFnZXMgPSB7XG4gICAgICAgICAgbGVmdDogW10sXG4gICAgICAgICAgcmlnaHQ6IFtdLFxuXG4gICAgICAgICAgcG9wdWxhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpO1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudEluZGV4ID4gMCkge1xuICAgICAgICAgICAgICBmb3IgKGkgPSAoY3VycmVudEluZGV4IC0gMSk7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxlZnQudW5zaGlmdChwYWdlc1tpXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRJbmRleCA8IChwYWdlcy5sZW5ndGggLSAxKSkge1xuICAgICAgICAgICAgICBmb3IgKGkgPSAoY3VycmVudEluZGV4ICsgMSk7IGkgPCAocGFnZXMubGVuZ3RoIC0gMSk7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucmlnaHQucHVzaChwYWdlc1tpXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJlc3VsdHMgPSB7XG4gICAgICAgICAgbGVmdDogW10sXG4gICAgICAgICAgcmlnaHQ6IFtdLFxuICAgICAgICAgIGFsbDogW10sXG5cbiAgICAgICAgICBqb2luOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmxlZnQudW5zaGlmdChwYWdlc1swXSk7XG4gICAgICAgICAgICB0aGlzLnJpZ2h0LnB1c2gocGFnZXNbcGFnZXMubGVuZ3RoIC0gMV0pO1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudEluZGV4ID4gMCAmJiAoY3VycmVudEluZGV4ICsgMSkgPCBwYWdlc1twYWdlcy5sZW5ndGggLSAxXSkge1xuICAgICAgICAgICAgICB0aGlzLmxlZnQucHVzaChwYWdlc1tjdXJyZW50SW5kZXhdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5hbGwgPSB0aGlzLmxlZnQuY29uY2F0KHRoaXMucmlnaHQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgc3RlcHBlZFBhZ2VzID0ge1xuICAgICAgICAgIGxlZnRTdGVwcGluZzogMCxcbiAgICAgICAgICByaWdodFN0ZXBwaW5nOiAwLFxuXG4gICAgICAgICAgc3RlcDogZnVuY3Rpb24gKHNwbGl0UGFnZXMsIGJhbGFuY2UpIHtcbiAgICAgICAgICAgIHZhciBpO1xuXG4gICAgICAgICAgICBpZiAoYmFsYW5jZS5sZWZ0ID4gMCkge1xuICAgICAgICAgICAgICB0aGlzLmxlZnRTdGVwcGluZyA9IE1hdGguZmxvb3Ioc3BsaXRQYWdlcy5sZWZ0Lmxlbmd0aCAvIGJhbGFuY2UubGVmdCk7XG5cbiAgICAgICAgICAgICAgZm9yIChpID0gKHNwbGl0UGFnZXMubGVmdFtzcGxpdFBhZ2VzLmxlZnQubGVuZ3RoIC0gMV0gKyAxKSAtIHRoaXMubGVmdFN0ZXBwaW5nOyByZXN1bHRzLmxlZnQubGVuZ3RoIDwgYmFsYW5jZS5sZWZ0OyBpID0gKGkgLSB0aGlzLmxlZnRTdGVwcGluZykpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLmxlZnQudW5zaGlmdChpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYmFsYW5jZS5yaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgdGhpcy5yaWdodFN0ZXBwaW5nID0gTWF0aC5mbG9vcihzcGxpdFBhZ2VzLnJpZ2h0Lmxlbmd0aCAvIGJhbGFuY2UucmlnaHQpO1xuXG4gICAgICAgICAgICAgIGZvciAoaSA9IChzcGxpdFBhZ2VzLnJpZ2h0WzBdIC0gMSkgKyB0aGlzLnJpZ2h0U3RlcHBpbmc7IHJlc3VsdHMucmlnaHQubGVuZ3RoIDwgYmFsYW5jZS5yaWdodDsgaSA9IChpICsgdGhpcy5yaWdodFN0ZXBwaW5nKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucmlnaHQucHVzaChpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzcGxpdFBhZ2VzLnBvcHVsYXRlKCk7XG5cbiAgICAgICAgdmFyIGJhbGFuY2VQZXJjZW50cyA9IHBlcmNlbnQoc3BsaXRQYWdlcy5sZWZ0Lmxlbmd0aCwgc3BsaXRQYWdlcy5yaWdodC5sZW5ndGgpO1xuICAgICAgICB2YXIgYmFsYW5jZXMgPSBiYWxhbmNlKChjdXJyZW50SW5kZXggKyAxKSwgZGlzcGxheVNpemUsIHBhZ2VzLmxlbmd0aCwgYmFsYW5jZVBlcmNlbnRzKTtcblxuICAgICAgICBzdGVwcGVkUGFnZXMuc3RlcChzcGxpdFBhZ2VzLCBiYWxhbmNlcyk7XG4gICAgICAgIHZhciBvdXRwdXQgPSByZXN1bHRzLmpvaW4oKTtcblxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIERldGVybWluZSB0aGUgYmFsYW5jZSBvZiBwYWdlcyB0byB0aGUgbGVmdCBhbmQgcmlnaHQganVkZ2luZyBmcm9tIHRoZSBjdXJyZW50IHBhZ2UgdGhlIHVzZXIgaXMgYXQuXG4gICAgICAgKiBcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjdXJyZW50UGFnZSBDdXJyZW50IHBhZ2UgdGhlIHVzZXIgaXMgYXRcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkaXNwbGF5U2l6ZSBMaW1pdCBvZiBwYWdlcyB0byBkaXNwbGF5XG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gbGFzdFBhZ2UgVmFsdWUgYXQgdGhlIGxhc3QgaW5kZXggb2YgdGhlIHBhZ2VzIGFycmF5XG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGVyY2VudGFnZXMgUGVyY2VudGFnZXMgb2JqZWN0XG4gICAgICAgKiBcbiAgICAgICAqIEByZXR1cm4ge09iamVjdH0gTGVmdC9SaWdodCByZXN1bHRzIG9iamVjdFxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBiYWxhbmNlKGN1cnJlbnRQYWdlLCBkaXNwbGF5U2l6ZSwgbGFzdFBhZ2UsIHBlcmNlbnRhZ2VzKSB7XG4gICAgICAgIGRpc3BsYXlTaXplID0gKGN1cnJlbnRQYWdlID09PSAxIHx8IGN1cnJlbnRQYWdlID09PSBsYXN0UGFnZSkgPyAoZGlzcGxheVNpemUgLSAyKSA6IChkaXNwbGF5U2l6ZSAtIDMpO1xuXG4gICAgICAgIHZhciByZXN1bHRzID0ge1xuICAgICAgICAgIGxlZnQ6IHRlYXJOdW1iZXIoZGlzcGxheVNpemUgKiAocGVyY2VudGFnZXMubGVmdCAvIDEwMCkpLmludGVnZXJWYWwsXG4gICAgICAgICAgcmlnaHQ6IHRlYXJOdW1iZXIoZGlzcGxheVNpemUgKiAocGVyY2VudGFnZXMucmlnaHQgLyAxMDApKS5pbnRlZ2VyVmFsXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGxlZnREZWNpbWFsID0gdGVhck51bWJlcihkaXNwbGF5U2l6ZSAqIChwZXJjZW50YWdlcy5sZWZ0IC8gMTAwKSkuZGVjaW1hbFZhbDtcbiAgICAgICAgdmFyIHJpZ2h0RGVjaW1hbCA9IHRlYXJOdW1iZXIoZGlzcGxheVNpemUgKiAocGVyY2VudGFnZXMucmlnaHQgLyAxMDApKS5kZWNpbWFsVmFsO1xuXG4gICAgICAgIGlmICgocmVzdWx0cy5sZWZ0ICsgcmVzdWx0cy5yaWdodCkgIT09IGRpc3BsYXlTaXplKSB7XG4gICAgICAgICAgaWYgKGxlZnREZWNpbWFsID09PSByaWdodERlY2ltYWwpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLmxlZnQgPiByZXN1bHRzLnJpZ2h0KSB7XG4gICAgICAgICAgICAgIHJlc3VsdHMubGVmdCsrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzdWx0cy5yaWdodCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAobGVmdERlY2ltYWwgPiByaWdodERlY2ltYWwpIHtcbiAgICAgICAgICAgICAgcmVzdWx0cy5sZWZ0Kys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXN1bHRzLnJpZ2h0Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogRGV0ZXJtaW5lIHBlcmNlbnRhZ2Ugb2YgdHdvIGFycmF5cyB0YWtpbmcgYm90aCBzdW1tZWQgYXMgdG90YWwuXG4gICAgICAgKiBcbiAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGxlZnRMZW5ndGggTGVmdCBhcnJheVxuICAgICAgICogQHBhcmFtIHtBcnJheX0gcmlnaHRMZW5ndGggUmlnaHQgYXJyYXlcbiAgICAgICAqIFxuICAgICAgICogQHJldHVybiB7T2JqZWN0fSBSZXR1cm5zIHBlcmNlbnRhZ2VzIG9iamVjdFxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBwZXJjZW50KGxlZnRMZW5ndGgsIHJpZ2h0TGVuZ3RoKSB7XG4gICAgICAgIHZhciBwZXJjZW50YWdlcyA9IHtcbiAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgIHJpZ2h0OiAwLFxuXG4gICAgICAgICAgcnVsZU9mVGhyZWU6IGZ1bmN0aW9uIChsZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiAoMTAwICogbGVuZ3RoKSAvIChsZWZ0TGVuZ3RoICsgcmlnaHRMZW5ndGgpO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICBkZWZpbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubGVmdCA9IHRoaXMucnVsZU9mVGhyZWUobGVmdExlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLnJpZ2h0ID0gdGhpcy5ydWxlT2ZUaHJlZShyaWdodExlbmd0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHBlcmNlbnRhZ2VzLmRlZmluZSgpO1xuXG4gICAgICAgIHJldHVybiBwZXJjZW50YWdlcztcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXBhcmF0ZSBhIG51bWJlciBpbnRvIGl0cyBpbnRlZ2VyIGFuZCBkZWNpbWFsIHBhcnRzXG4gICAgICAgKiBcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbnB1dE51bWJlciBOdW1iZXIgdG8gdGVhclxuICAgICAgICogXG4gICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRvcm4gbnVtYmVyIG9iamVjdFxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiB0ZWFyTnVtYmVyKG51bWJlcikge1xuICAgICAgICB2YXIgdG9ybk51bWJlciA9IHtcbiAgICAgICAgICBpbnRlZ2VyVmFsOiBNYXRoLmZsb29yKG51bWJlciksXG4gICAgICAgICAgZGVjaW1hbFZhbDogKG51bWJlciAlIDEpXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRvcm5OdW1iZXI7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmUtZ2VuZXJhdGUgb24gcmVmcmVzaCBvciBwYWdlIGNoYW5nZVxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBnZW5lcmF0ZVBhZ2VzQXJyYXkoKSB7XG4gICAgICAgICRzY29wZS5wYWdlcyA9IHBhZ2VyKCRzY29wZS50b3RhbCwgJHNjb3BlLnBhZ2UsICRzY29wZS5wYWdlQ291bnQsICRzY29wZS5wYWdlc0xpbWl0KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBPbiBjb3VudCByZXF1ZXN0IHN1Y2Nlc3MuXG4gICAgICAgKlxuICAgICAgICogQHR5cGUgJGh0dHAgdGhlbiBjYWxsYmFjay5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gb25Db3VudFN1Y2Nlc3MocmVzKSB7XG4gICAgICAgICRzY29wZS5wYWdlc0xpbWl0ID0gcGFyc2VJbnQoJGF0dHJzLm5ncFBhZ2VzTGltaXQgfHwgNyk7XG4gICAgICAgICRzY29wZS50b3RhbCA9IHBhcnNlSW50KHJlcy5kYXRhIHx8IDApO1xuICAgICAgICAkc2NvcGUucGFnZUNvdW50ID0gcGFyc2VJbnQoJGF0dHJzLm5ncFBhZ2VDb3VudCk7XG5cbiAgICAgICAgZ2VuZXJhdGVQYWdlc0FycmF5KCk7XG5cbiAgICAgICAgaWYgKCRhdHRycy5uZ3BTdGFydFBhZ2UpIHtcbiAgICAgICAgICAkc2NvcGUucGFnZSA9IHBhcnNlSW50KCRhdHRycy5uZ3BTdGFydFBhZ2UpIHx8IDE7XG5cbiAgICAgICAgICBpZiAoJHNjb3BlLnBhZ2UgPiAkc2NvcGUucGFnZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAkc2NvcGUucGFnZSA9ICRzY29wZS5wYWdlcy5sZW5ndGg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCRzY29wZS5wYWdlIDwgMSkge1xuICAgICAgICAgICAgJHNjb3BlLnBhZ2UgPSAxO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnNvbGUubG9nKCdTdGFydCBwYWdlOiAnICsgJHNjb3BlLnBhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0cyB0aGUgY3VycmVudCBwYWdlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwYWdlIFRoZSBwYWdlIG51bWJlciB0byBzZXQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHNldFBhZ2UocGFnZSkge1xuICAgICAgICAkc2NvcGUucGFnZSA9IHBhZ2U7XG4gICAgICAgICRzY29wZS5wYWdlcihwYWdlKTtcblxuICAgICAgICBnZW5lcmF0ZVBhZ2VzQXJyYXkoKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHb2VzIHRvIHRoZSBuZXh0IHBhZ2UuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgIGlmICgkc2NvcGUucGFnZSA8ICRzY29wZS5wYWdlc1skc2NvcGUucGFnZXMubGVuZ3RoIC0gMV0pIHtcbiAgICAgICAgICBzZXRQYWdlKCsrJHNjb3BlLnBhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR29lcyB0byB0aGUgcHJldmlvdXMgcGFnZS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gcHJldigpIHtcbiAgICAgICAgaWYgKCRzY29wZS5wYWdlID4gMSkge1xuICAgICAgICAgIHNldFBhZ2UoLS0kc2NvcGUucGFnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICAgICRodHRwLmdldCgkYXR0cnMubmdwQ291bnRVcmwpXG4gICAgICAgICAgLnRoZW4ob25Db3VudFN1Y2Nlc3MpO1xuICAgICAgfVxuXG4gICAgICAkc2NvcGUuc2V0UGFnZSA9IHNldFBhZ2U7XG4gICAgICAkc2NvcGUucmVzZXQgPSByZXNldDtcbiAgICAgICRzY29wZS5uZXh0ID0gbmV4dDtcbiAgICAgICRzY29wZS5wcmV2ID0gcHJldjtcbiAgICAgICRzY29wZS5wYWdlID0gMTtcblxuICAgICAgcmVzZXQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYWdpbmF0aW9uIGRpcmVjdGl2ZSB0ZW1wbGF0ZSBVUkwgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAdHlwZSBBbmd1bGFySlMgRGlyZWN0aXZlIFRlbXBsYXRlIFVSTCBGdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBuZ1BhZ2luYXRpb25EaXJlY3RpdmVUZW1wbGF0ZVVybEZuKCRlbGVtZW50LCAkYXR0cnMpIHtcbiAgICAgIHJldHVybiAkYXR0cnMubmdwVGVtcGxhdGVVcmw7XG4gICAgfVxuXG4gICAgLyogUGFnaW5hdGlvbiBkaXJlY3RpdmUgZGVmaW5pdGlvbiAqL1xuICAgIHZhciBuZ1BhZ2luYXRpb25EaXJlY3RpdmVEZWYgPSB7XG4gICAgICB0ZW1wbGF0ZVVybDogbmdQYWdpbmF0aW9uRGlyZWN0aXZlVGVtcGxhdGVVcmxGbixcblxuICAgICAgbGluazogbmdQYWdpbmF0aW9uRGlyZWN0aXZlTGlua0ZuLFxuXG4gICAgICByZXN0cmljdDogJ0EnLFxuXG4gICAgICBzY29wZToge1xuICAgICAgICBwYWdlcjogJz1uZ3BQYWdlcidcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIG5nUGFnaW5hdGlvbkRpcmVjdGl2ZURlZjtcbiAgfVxuXG4gIC8qIERlZmluZSB0aGUgQW5ndWxhckpTIG1vZHVsZSAqL1xuICBuZy5tb2R1bGUoJ25nUGFnZXInLCBbXSlcblxuICAgIC8qIERlZmluZSB0aGUgQW5ndWxhckpTIGRpcmVjdGl2ZSAqL1xuICAgIC5kaXJlY3RpdmUoJ25nUGFnZXInLCBbXG4gICAgICAnJGh0dHAnLFxuXG4gICAgICBuZ1BhZ2luYXRpb25EaXJlY3RpdmVGblxuICAgIF0pO1xuXG59KHdpbmRvdykpOyJdfQ==
