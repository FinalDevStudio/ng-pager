!function(t){"use strict";function e(t){function e(e,n,g){function r(t){e.total=parseInt(t.data||0),e.pageCount=parseInt(g.ngpPageCount),e.pages=p(),g.ngpStartPage&&(e.page=parseInt(g.ngpStartPage)||1,e.page>e.pages.length&&(e.page=e.pages.length),e.page<1&&(e.page=1),console.log("Start page: "+e.page))}function a(t){e.page=t,e.pager(t)}function l(){e.page<e.pages.length&&a(++e.page)}function i(){e.page>1&&a(--e.page)}function h(){t.get(g.ngpCountUrl).then(r)}function p(){for(var t=isNaN(t)?8:t,n=isNaN(n)?10:n,g=[],r=[],a=0,l=0,i=Math.floor(e.total/e.pageCount);l<i;l++)g.push(++a);return e.total%e.pageCount&&g.push(++a),g.length>7?r=f(e.page,t,g):g}function f(t,e,n){for(var g={left:[],right:[]},r=--t,a=--r;a>=0;a--)g.left.unshift(n[a]);for(var l=++r;l<n.length;l++)g.right.push(n[l]);var i=o(e-2,g.left.length,n),h=u(i,g),p={left:[],right:[],all:[],join:function(t){this.left.push(t),this.all=this.left.concat(this.right)}};return p.left=h.left,p.right=h.right,p.join(n[r]),p.all.length>e&&p.all.splice(1,1),p.all}function o(t,e,n){var g=s(e,n.length),r=Math.ceil(t*g.integer/100),a=Math.abs(t-r),l={left:0,right:0};return g.decimal>=5?(l.left=++r,l.right=a):(l.left=r,l.right=++a),l}function u(t,e){for(var n=Math.ceil(e.left.length/t.left),g=Math.ceil(e.right.length/t.right),r={left:[],right:[]},a=0;a<e.left.length;a+=n)r.left.push(e.left[a]);if(1===e.right.length)r.right.push(e.right[0]);else for(var l=e.right.length-1;l>0;l-=g)r.right.unshift(e.right[l]);return r}function s(t,e){return{integer:Math.floor(100*t/e),decimal:Number(String(100*t/e%1).charAt(2))}}e.setPage=a,e.reset=h,e.next=l,e.prev=i,e.page=1,h()}function n(t,e){return e.ngpTemplateUrl}var g={templateUrl:n,link:e,restrict:"A",scope:{pager:"=ngpPager"}};return g}var n=t.angular;n.module("ngPager",[]).directive("ngPager",["$http",e])}(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5nLXBhZ2VyLmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsIm5nUGFnaW5hdGlvbkRpcmVjdGl2ZUZuIiwiJGh0dHAiLCJuZ1BhZ2luYXRpb25EaXJlY3RpdmVMaW5rRm4iLCIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRycyIsIm9uQ291bnRTdWNjZXNzIiwicmVzIiwidG90YWwiLCJwYXJzZUludCIsImRhdGEiLCJwYWdlQ291bnQiLCJuZ3BQYWdlQ291bnQiLCJwYWdlcyIsImRlZmluZVBhZ2VzIiwibmdwU3RhcnRQYWdlIiwicGFnZSIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJzZXRQYWdlIiwicGFnZXIiLCJuZXh0IiwicHJldiIsInJlc2V0IiwiZ2V0IiwibmdwQ291bnRVcmwiLCJ0aGVuIiwiZGlzcGxheVNpemUiLCJpc05hTiIsImVsZW1lbnRzUGVyUGFnZSIsImFsbFBhZ2VzIiwiaSIsImwiLCJNYXRoIiwiZmxvb3IiLCJwdXNoIiwiZml4ZWRQYWdlciIsInNwbGl0UGFnZXMiLCJsZWZ0IiwicmlnaHQiLCJ6ZXJvSW5kZXhQYWdlIiwidW5zaGlmdCIsImoiLCJiYWwiLCJiYWxhbmNlIiwiYmFsYW5jZVBhZ2VzIiwiZGVwbG95UGFnZXMiLCJzdGVwcGVkUGFnZXMiLCJhbGwiLCJqb2luIiwiY3VycmVudFBhZ2UiLCJ0aGlzIiwiY29uY2F0Iiwic3BsaWNlIiwibGVmdEFsbExlbmd0aCIsInBlcmNlbnRhZ2UiLCJwZXJjZW50IiwibGVmdEJhbGFuY2UiLCJjZWlsIiwiaW50ZWdlciIsInJpZ2h0QmFsYW5jZSIsImFicyIsImJhbGFuY2VPdXQiLCJkZWNpbWFsIiwibGVmdFN0ZXAiLCJyaWdodFN0ZXAiLCJzZWxlY3Rpb24iLCJ2YWx1ZSIsIk51bWJlciIsIlN0cmluZyIsImNoYXJBdCIsIm5nUGFnaW5hdGlvbkRpcmVjdGl2ZVRlbXBsYXRlVXJsRm4iLCJuZ3BUZW1wbGF0ZVVybCIsIm5nUGFnaW5hdGlvbkRpcmVjdGl2ZURlZiIsInRlbXBsYXRlVXJsIiwibGluayIsInJlc3RyaWN0Iiwic2NvcGUiLCJuZyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJkaXJlY3RpdmUiXSwibWFwcGluZ3MiOiJDQUFDLFNBQVVBLEdBQ1QsWUFTQSxTQUFTQyxHQUF3QkMsR0FNL0IsUUFBU0MsR0FBNEJDLEVBQVFDLEVBQVVDLEdBTXJELFFBQVNDLEdBQWVDLEdBQ3RCSixFQUFPSyxNQUFRQyxTQUFTRixFQUFJRyxNQUFRLEdBQ3BDUCxFQUFPUSxVQUFZRixTQUFTSixFQUFPTyxjQUNuQ1QsRUFBT1UsTUFBUUMsSUFFWFQsRUFBT1UsZUFDVFosRUFBT2EsS0FBT1AsU0FBU0osRUFBT1UsZUFBaUIsRUFFM0NaLEVBQU9hLEtBQU9iLEVBQU9VLE1BQU1JLFNBQzdCZCxFQUFPYSxLQUFPYixFQUFPVSxNQUFNSSxRQUd6QmQsRUFBT2EsS0FBTyxJQUNoQmIsRUFBT2EsS0FBTyxHQUdoQkUsUUFBUUMsSUFBSSxlQUFpQmhCLEVBQU9hLE9BU3hDLFFBQVNJLEdBQVFKLEdBQ2ZiLEVBQU9hLEtBQU9BLEVBQ2RiLEVBQU9rQixNQUFNTCxHQU1mLFFBQVNNLEtBQ0huQixFQUFPYSxLQUFPYixFQUFPVSxNQUFNSSxRQUM3QkcsSUFBVWpCLEVBQU9hLE1BT3JCLFFBQVNPLEtBQ0hwQixFQUFPYSxLQUFPLEdBQ2hCSSxJQUFVakIsRUFBT2EsTUFJckIsUUFBU1EsS0FDUHZCLEVBQU13QixJQUFJcEIsRUFBT3FCLGFBQ2RDLEtBQUtyQixHQU1WLFFBQVNRLEtBU1AsSUFBSyxHQVBEYyxHQUFlQyxNQUFNRCxHQUFnQixFQUFJQSxFQUN6Q0UsRUFBbUJELE1BQU1DLEdBQW9CLEdBQUtBLEVBRWxEQyxLQUNBbEIsS0FDQUcsRUFBTyxFQUVGZ0IsRUFBSSxFQUFHQyxFQUFJQyxLQUFLQyxNQUFNaEMsRUFBT0ssTUFBUUwsRUFBT1EsV0FDakRxQixFQUFJQyxFQUFHRCxJQUNMRCxFQUFTSyxPQUFPcEIsRUFPdEIsT0FKSWIsR0FBT0ssTUFBUUwsRUFBT1EsV0FDeEJvQixFQUFTSyxPQUFPcEIs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LCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKHdpbmRvdykge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIG5nID0gd2luZG93LmFuZ3VsYXI7XG5cbiAgLyoqXG4gICAqIFBhZ2luYXRpb24gZGlyZWN0aXZlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAdHlwZSBBbmd1bGFySlMgRGlyZWN0aXZlIEZ1bmN0aW9uXG4gICAqL1xuICBmdW5jdGlvbiBuZ1BhZ2luYXRpb25EaXJlY3RpdmVGbigkaHR0cCkge1xuICAgIC8qKlxuICAgICAqIFBhZ2luYXRpb24gZGlyZWN0aXZlIGxpbmsgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAdHlwZSBBbmd1bGFySlMgRGlyZWN0aXZlIExpbmsgRnVuY3Rpb25cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBuZ1BhZ2luYXRpb25EaXJlY3RpdmVMaW5rRm4oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzKSB7XG4gICAgICAvKipcbiAgICAgICAqIE9uIGNvdW50IHJlcXVlc3Qgc3VjY2Vzcy5cbiAgICAgICAqXG4gICAgICAgKiBAdHlwZSAkaHR0cCB0aGVuIGNhbGxiYWNrLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBvbkNvdW50U3VjY2VzcyhyZXMpIHtcbiAgICAgICAgJHNjb3BlLnRvdGFsID0gcGFyc2VJbnQocmVzLmRhdGEgfHwgMCk7XG4gICAgICAgICRzY29wZS5wYWdlQ291bnQgPSBwYXJzZUludCgkYXR0cnMubmdwUGFnZUNvdW50KTtcbiAgICAgICAgJHNjb3BlLnBhZ2VzID0gZGVmaW5lUGFnZXMoKTsgICAgICAgXG5cbiAgICAgICAgaWYgKCRhdHRycy5uZ3BTdGFydFBhZ2UpIHtcbiAgICAgICAgICAkc2NvcGUucGFnZSA9IHBhcnNlSW50KCRhdHRycy5uZ3BTdGFydFBhZ2UpIHx8IDE7XG5cbiAgICAgICAgICBpZiAoJHNjb3BlLnBhZ2UgPiAkc2NvcGUucGFnZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAkc2NvcGUucGFnZSA9ICRzY29wZS5wYWdlcy5sZW5ndGg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCRzY29wZS5wYWdlIDwgMSkge1xuICAgICAgICAgICAgJHNjb3BlLnBhZ2UgPSAxO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnNvbGUubG9nKCdTdGFydCBwYWdlOiAnICsgJHNjb3BlLnBhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0cyB0aGUgY3VycmVudCBwYWdlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwYWdlIFRoZSBwYWdlIG51bWJlciB0byBzZXQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHNldFBhZ2UocGFnZSkge1xuICAgICAgICAkc2NvcGUucGFnZSA9IHBhZ2U7XG4gICAgICAgICRzY29wZS5wYWdlcihwYWdlKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHb2VzIHRvIHRoZSBuZXh0IHBhZ2UuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgIGlmICgkc2NvcGUucGFnZSA8ICRzY29wZS5wYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgICBzZXRQYWdlKCsrJHNjb3BlLnBhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR29lcyB0byB0aGUgcHJldmlvdXMgcGFnZS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gcHJldigpIHtcbiAgICAgICAgaWYgKCRzY29wZS5wYWdlID4gMSkge1xuICAgICAgICAgIHNldFBhZ2UoLS0kc2NvcGUucGFnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICAgICRodHRwLmdldCgkYXR0cnMubmdwQ291bnRVcmwpXG4gICAgICAgICAgLnRoZW4ob25Db3VudFN1Y2Nlc3MpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJldHVybnMgZGluYW1pYyBsaXN0IG9mIGJyb3dzYWJsZSBwYWdlcyB0byBkaXNwbGF5LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBkZWZpbmVQYWdlcygpIHtcbiAgICAgICAgXG4gICAgICAgIHZhciBkaXNwbGF5U2l6ZSA9IChpc05hTihkaXNwbGF5U2l6ZSkpID8gOCA6IGRpc3BsYXlTaXplO1xuICAgICAgICB2YXIgZWxlbWVudHNQZXJQYWdlID0gKGlzTmFOKGVsZW1lbnRzUGVyUGFnZSkpID8gMTAgOiBlbGVtZW50c1BlclBhZ2U7XG5cbiAgICAgICAgdmFyIGFsbFBhZ2VzID0gW107XG4gICAgICAgIHZhciBwYWdlcyA9IFtdO1xuICAgICAgICB2YXIgcGFnZSA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBNYXRoLmZsb29yKCRzY29wZS50b3RhbCAvICRzY29wZS5wYWdlQ291bnQpO1xuICAgICAgICAgICAgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICBhbGxQYWdlcy5wdXNoKCsrcGFnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJHNjb3BlLnRvdGFsICUgJHNjb3BlLnBhZ2VDb3VudCkge1xuICAgICAgICAgIGFsbFBhZ2VzLnB1c2goKytwYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGFsbFBhZ2VzLmxlbmd0aCA+IDcpIHtcbiAgICAgICAgICBwYWdlcyA9IGZpeGVkUGFnZXIoJHNjb3BlLnBhZ2UsIGRpc3BsYXlTaXplLCBhbGxQYWdlcyk7XG4gICAgICAgICAgcmV0dXJuIHBhZ2VzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBhbGxQYWdlcztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNlcGFyYXRlcyBsaXN0IG9mIHBhZ2VzIGluIHR3byBhcnJheXM6IGxlZnQgYW5kIHJpZ2h0IGZyb20gY3VycmVudCBwYWdlLiBcbiAgICAgICAqIFN0ZXBzIGVhY2ggYXJyYXksIGZpbmFsbHkgcmV0dXJucyBjb25jYXRlbmF0aW9uIG9mIGJvdGggc3RlcHBlZCBwbHVzIGN1cnJlbnQgcGFnZS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gZml4ZWRQYWdlcihwYWdlLCBkaXNwbGF5U2l6ZSwgYWxsUGFnZXMpIHtcbiAgICAgICAgXG4gICAgICAgIHZhciBzcGxpdFBhZ2VzID0ge1xuICAgICAgICAgIGxlZnQ6IFtdLFxuICAgICAgICAgIHJpZ2h0OiBbXVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciB6ZXJvSW5kZXhQYWdlID0gLS1wYWdlO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAtLXplcm9JbmRleFBhZ2U7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgc3BsaXRQYWdlcy5sZWZ0LnVuc2hpZnQoYWxsUGFnZXNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaiA9ICsremVyb0luZGV4UGFnZTsgaiA8IGFsbFBhZ2VzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgc3BsaXRQYWdlcy5yaWdodC5wdXNoKGFsbFBhZ2VzW2pdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBiYWwgPSBiYWxhbmNlKGRpc3BsYXlTaXplIC0gMiwgc3BsaXRQYWdlcy5sZWZ0Lmxlbmd0aCwgYWxsUGFnZXMpO1xuICAgICAgICB2YXIgYmFsYW5jZVBhZ2VzID0gZGVwbG95UGFnZXMoYmFsLCBzcGxpdFBhZ2VzKTtcblxuICAgICAgICB2YXIgc3RlcHBlZFBhZ2VzID0ge1xuICAgICAgICAgIGxlZnQ6IFtdLFxuICAgICAgICAgIHJpZ2h0OiBbXSxcbiAgICAgICAgICBhbGw6IFtdLCAvLy5sZWZ0ICsgY3VycmVudCArIC5yaWdodFxuXG4gICAgICAgICAgam9pbjogZnVuY3Rpb24oY3VycmVudFBhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMubGVmdC5wdXNoKGN1cnJlbnRQYWdlKTtcbiAgICAgICAgICAgIHRoaXMuYWxsID0gdGhpcy5sZWZ0LmNvbmNhdCh0aGlzLnJpZ2h0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc3RlcHBlZFBhZ2VzLmxlZnQgPSBiYWxhbmNlUGFnZXMubGVmdDtcbiAgICAgICAgc3RlcHBlZFBhZ2VzLnJpZ2h0ID0gYmFsYW5jZVBhZ2VzLnJpZ2h0O1xuXG4gICAgICAgIHN0ZXBwZWRQYWdlcy5qb2luKGFsbFBhZ2VzW3plcm9JbmRleFBhZ2VdKTtcbiAgICAgICAgXG4gICAgICAgIC8qbGVmdFNob3duID0gYmFsYW5jZVBhZ2VzLmxlZnQ7XG4gICAgICAgIGxlZnRTaG93bi5wdXNoKGFsbFBhZ2VzW3plcm9JbmRleFBhZ2VdKTtcbiAgICAgICAgcmlnaHRTaG93biA9IGJhbGFuY2VQYWdlcy5yaWdodDtcblxuICAgICAgICB2YXIgc2hvd25QYWdlcyA9IGxlZnRTaG93bi5jb25jYXQocmlnaHRTaG93bik7Ki9cblxuICAgICAgICBpZiAoc3RlcHBlZFBhZ2VzLmFsbC5sZW5ndGggPiBkaXNwbGF5U2l6ZSkge1xuICAgICAgICAgIHN0ZXBwZWRQYWdlcy5hbGwuc3BsaWNlKDEsIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0ZXBwZWRQYWdlcy5hbGw7XG4gICAgICB9XG5cbiAgICAgICAvKipcbiAgICAgICAqIERldGVybWluZXMgdGhlIGJhbGFuY2Ugb2YgcGFnZXMgdG8gYmUgc2hvd24gdG8gZWFjaCB0aGUgbGVmdCBhbmQgdGhlIHJpZ2h0IHNpZGVzXG4gICAgICAgKiByZWdhcmRpbmcgdGhlIGRlc2lyZWQgdG90YWwgYW1vdW50IG9mIHBhZ2VzIHRvIGRpc3BsYXkuXG4gICAgICAgKiAqL1xuICAgICAgZnVuY3Rpb24gYmFsYW5jZShkaXNwbGF5U2l6ZSwgbGVmdEFsbExlbmd0aCwgYWxsUGFnZXMpIHtcbiAgICAgICAgdmFyIHBlcmNlbnRhZ2UgPSBwZXJjZW50KGxlZnRBbGxMZW5ndGgsIGFsbFBhZ2VzLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICB2YXIgbGVmdEJhbGFuY2UgPSBNYXRoLmNlaWwoKGRpc3BsYXlTaXplICogcGVyY2VudGFnZS5pbnRlZ2VyKSAvIDEwMCk7XG4gICAgICAgIHZhciByaWdodEJhbGFuY2UgPSBNYXRoLmFicyhkaXNwbGF5U2l6ZSAtIGxlZnRCYWxhbmNlKTtcbiAgICAgICAgXG4gICAgICAgIHZhciBiYWxhbmNlT3V0ID0ge1xuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAocGVyY2VudGFnZS5kZWNpbWFsID49IDUpIHtcbiAgICAgICAgICBiYWxhbmNlT3V0LmxlZnQgPSArK2xlZnRCYWxhbmNlO1xuICAgICAgICAgIGJhbGFuY2VPdXQucmlnaHQgPSByaWdodEJhbGFuY2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYmFsYW5jZU91dC5sZWZ0ID0gbGVmdEJhbGFuY2U7XG4gICAgICAgICAgYmFsYW5jZU91dC5yaWdodCA9ICsrcmlnaHRCYWxhbmNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYWxhbmNlT3V0O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvKipcbiAgICAgICAqIFN0ZXBzIHRocm91Z2ggZWFjaCBhcnJheSBvZiBwYWdlcyBmb2xsb3dpbmcgdGhlIGxlZnQvcmlnaHQgYmFsYW5jZS4gXG4gICAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIHR3byBhcnJheXMgb2Ygc2VsZWN0ZWQgbGVmdCBhbmQgcmlnaHQgcGFnZXMgdG8gZGlzcGxheS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gZGVwbG95UGFnZXMoYmFsYW5jZSwgc3BsaXRQYWdlcykge1xuICAgICAgICBcbiAgICAgICAgdmFyIGxlZnRTdGVwID0gTWF0aC5jZWlsKHNwbGl0UGFnZXMubGVmdC5sZW5ndGggLyBiYWxhbmNlLmxlZnQpO1xuICAgICAgICB2YXIgcmlnaHRTdGVwID0gTWF0aC5jZWlsKHNwbGl0UGFnZXMucmlnaHQubGVuZ3RoIC8gYmFsYW5jZS5yaWdodCk7XG5cbiAgICAgICAgdmFyIHNlbGVjdGlvbiA9IHtcbiAgICAgICAgICBsZWZ0OiBbXSxcbiAgICAgICAgICByaWdodDogW11cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgbGVmdFNlbGVjdGlvbiA9IFtdO1xuICAgICAgICB2YXIgcmlnaHRTZWxlY3Rpb24gPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNwbGl0UGFnZXMubGVmdC5sZW5ndGg7IGkgKz0gbGVmdFN0ZXApIHtcbiAgICAgICAgICBzZWxlY3Rpb24ubGVmdC5wdXNoKHNwbGl0UGFnZXMubGVmdFtpXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3BsaXRQYWdlcy5yaWdodC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBzZWxlY3Rpb24ucmlnaHQucHVzaChzcGxpdFBhZ2VzLnJpZ2h0WzBdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKHZhciBqID0gc3BsaXRQYWdlcy5yaWdodC5sZW5ndGggLSAxOyBqID4gMDsgaiAtPSByaWdodFN0ZXApIHtcbiAgICAgICAgICAgIHNlbGVjdGlvbi5yaWdodC51bnNoaWZ0KHNwbGl0UGFnZXMucmlnaHRbal0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHNlbGVjdGlvbjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZnVuY3Rpb24gcGVyY2VudCh2YWx1ZSwgdG90YWwpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpbnRlZ2VyOiBNYXRoLmZsb29yKCgxMDAgKiB2YWx1ZSkgLyB0b3RhbCksXG4gICAgICAgICAgZGVjaW1hbDogTnVtYmVyKFN0cmluZygoKDEwMCAqIHZhbHVlKSAvIHRvdGFsKSAlIDEpLmNoYXJBdCgyKSlcbiAgICAgICAgfSBcbiAgICAgIH1cblxuICAgICAgJHNjb3BlLnNldFBhZ2UgPSBzZXRQYWdlO1xuICAgICAgJHNjb3BlLnJlc2V0ID0gcmVzZXQ7XG4gICAgICAkc2NvcGUubmV4dCA9IG5leHQ7XG4gICAgICAkc2NvcGUucHJldiA9IHByZXY7ICAgICAgXG4gICAgICAkc2NvcGUucGFnZSA9IDE7XG5cbiAgICAgIHJlc2V0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFnaW5hdGlvbiBkaXJlY3RpdmUgdGVtcGxhdGUgVVJMIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHR5cGUgQW5ndWxhckpTIERpcmVjdGl2ZSBUZW1wbGF0ZSBVUkwgRnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gbmdQYWdpbmF0aW9uRGlyZWN0aXZlVGVtcGxhdGVVcmxGbigkZWxlbWVudCwgJGF0dHJzKSB7XG4gICAgICByZXR1cm4gJGF0dHJzLm5ncFRlbXBsYXRlVXJsO1xuICAgIH1cblxuICAgIC8qIFBhZ2luYXRpb24gZGlyZWN0aXZlIGRlZmluaXRpb24gKi9cbiAgICB2YXIgbmdQYWdpbmF0aW9uRGlyZWN0aXZlRGVmID0ge1xuICAgICAgdGVtcGxhdGVVcmw6IG5nUGFnaW5hdGlvbkRpcmVjdGl2ZVRlbXBsYXRlVXJsRm4sXG5cbiAgICAgIGxpbms6IG5nUGFnaW5hdGlvbkRpcmVjdGl2ZUxpbmtGbixcblxuICAgICAgcmVzdHJpY3Q6ICdBJyxcblxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgcGFnZXI6ICc9bmdwUGFnZXInXG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBuZ1BhZ2luYXRpb25EaXJlY3RpdmVEZWY7XG4gIH1cblxuICAvKiBEZWZpbmUgdGhlIEFuZ3VsYXJKUyBtb2R1bGUgKi9cbiAgbmcubW9kdWxlKCduZ1BhZ2VyJywgW10pXG5cbiAgLyogRGVmaW5lIHRoZSBBbmd1bGFySlMgZGlyZWN0aXZlICovXG4gIC5kaXJlY3RpdmUoJ25nUGFnZXInLCBbXG4gICAgJyRodHRwJyxcblxuICAgIG5nUGFnaW5hdGlvbkRpcmVjdGl2ZUZuXG4gIF0pO1xuXG59KHdpbmRvdykpO1xuIl19
